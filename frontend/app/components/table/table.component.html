<div>
    <p class="meetings">Vyšetření a schůzky</p>
</div>
<div class="appointment-wrapper">
    <div class="appointment-container">
        <table class="appointment-table appointment-table-striped">
            <pre *ngIf="appointments">{{ appointments | json }}</pre>   
            <thead>
                <tr>
                    <th>Místnost</th>
                    <th>Čas</th>
                    <th>Procedura</th>
                    <th>Lékař</th>
                    <th>Pacient</th>
                    <th>Oddělení</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf="appointments.length === 0">
                    <td colspan="7" class="no-data-message">⚠️ Žádná data k dispozici.</td>
                </tr>
                <pre *ngIf="tableData">{{ tableData | json }}</pre>
                <tr *ngFor="let appt of tableData" [attr.data-id]="appt.id">
                    <td>{{ appt.room ?? 'N/A' }}</td>
                    <td>{{ appt.time }}</td>
                    <td>{{ appt.examination ?? 'Neznámé vyšetření' }}</td>
                    <td>{{ appt.doctor ?? 'Neznámý lékař' }}</td>
                    <td>{{ appt.patient?.name ?? 'Neznámý pacient' }} (ID: {{ appt.patient?.id ?? 'N/A' }})</td>
                    <td>{{ appt.department ?? 'N/A' }}</td>
                    <td [ngClass]="{ 'status-done': appt.status === 'done', 'status-pending': appt.status === 'pending', 'status-unknown': !appt.status }">
                        <span *ngIf="appt.status === 'done'" class="status-done">✔ Hotovo</span>
                        <span *ngIf="appt.status === 'pending'" class="status-pending">⏳ Čeká se</span>
                        <span *ngIf="!appt.status" class="status-unknown">❔ Neznámý</span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>